!function(){angular.module("AdministrationModule",["ngRoute"]),angular.module("AdministrationModule").config(["$routeProvider",function(a){var b={name:"admin",templateUrl:"../app/Administration/Partials/index.html",pageInfo:{icon:"wrench",title:"Parameters",help:!0}};a.when("/admin",b)}]),angular.module("DashboardModule",["ngRoute"]).run(["MenuService",function(a){a.addItem({id:"dashboard",position:1,icon:"dashboard",title:"Dashboard",url:"#/dashboard"})}]),angular.module("DashboardModule").controller("DashboardController",[function(){}]),angular.module("DashboardModule").config(["$routeProvider",function(a){var b={name:"dashboard",url:"/dashboard",templateUrl:"../app/Dashboard/Partials/dashboard.html",controller:"DashboardController",controllerAs:"controller",pageInfo:{icon:"dashboard",title:"Dashboard",description:"Control panel",help:!0,config:!0}};a.when("/dashboard",b)}]),angular.module("SearchModule",[]),angular.module("SearchModule").controller("SidebarPanelController",[function(){this.collapsed=!1}]),angular.module("SearchModule").directive("searchSidebarPanel",[function(){return{restrict:"E",replace:!0,templateUrl:"../app/Search/Partials/sidebar-panel.html",scope:{collapsed:"=?"},controller:"SidebarPanelController",controllerAs:"sidebarPanel",link:function(a,b,c,d){"undefined"==typeof a.collapsed&&(a.collapsed=d.collapsed),a.$watch("collapsed",function(a){d.collapsed=a})}}}]),angular.module("NotificationModule",[]),angular.module("NotificationModule").directive("notificationConfig",[function(){}]),angular.module("HomeModule",["ngRoute","DashboardModule"]),angular.module("HomeModule").config(["$routeProvider",function(a){var b={name:"home",url:"/home",templateUrl:"../app/Home/Partials/index.html",pageInfo:{icon:"dashboard",title:"Dashboard",description:"Control panel"}};a.when("/home",b)}]),angular.module("UserModule",["ngRoute","NotificationModule"]),angular.module("UserModule").controller("AuthenticationController",["AuthenticationService",function(a){this.logIn=function(b,c){b&&c&&a.logIn(b,c).success(function(){}).error(function(){})},this.logOut=function(){}}]),angular.module("UserModule").controller("ProfileController",["HeaderService",function(a){a.addButton({icon:"pencil",iconOnly:!0,label:"Edit profile",action:{func:function(){console.log("profile edit")}}})}]),angular.module("UserModule").controller("SidebarPanelController",[function(){this.collapsed=!1}]),angular.module("UserModule").controller("UserController",["HeaderService","users",function(a,b){this.users=b,this.selectedUsers=[],a.addButton({icon:"plus",iconOnly:!0,label:"Create User",url:"#/user/create"})}]),angular.module("UserModule").controller("UserEditController",["$location","UserService","user",function(a,b,c){this.user=c,this.save=function(){b.save(this.user).then(function(){a.path("/user")},function(){})},this.cancel=function(){a.path("/user")}}]),angular.module("UserModule").directive("userSidebarPanel",[function(){return{restrict:"E",replace:!0,templateUrl:"../app/User/Partials/Sidebar/user-panel.html",scope:{collapsed:"=?"},controller:"SidebarPanelController",controllerAs:"sidebarPanel",link:function(a,b,c,d){"undefined"==typeof a.collapsed&&(a.collapsed=d.collapsed),a.$watch("collapsed",function(a){d.collapsed=a})}}}]),angular.module("UserModule").factory("AuthenticationService",[function(){var a={isLogged:!1};return{isLogged:function(){return a.isLogged},setLogged:function(b){return a.isLogged=b,this},logIn:function(a,b){return $http.post("http://localhost:3000/user/login",{username:a,password:b})},logOut:function(){}}}]),angular.module("UserModule").factory("UserService",["$http","$q",function(a,b){return{"new":function(){return{_id:null,firstName:null,lastName:null,login:null}},list:function(){var c=b.defer();return a.get("http://localhost:3000/user").success(function(a){c.resolve(a.data)}).error(function(a){c.reject(a)}),c.promise},get:function(c){var d=b.defer();return a.get("http://localhost:3000/user/"+c).success(function(a){d.resolve(a.data)}).error(function(a){d.reject(a)}),d.promise},save:function(c){var d=b.defer();if(c._id)var e=a.put("http://localhost:3000/user/"+c._id,c);else var e=a.post("http://localhost:3000/user/",c);return e.success(function(a){d.resolve(a.data)}).error(function(a){d.reject(a)}),d.promise}}}]),angular.module("UserModule").config(["$routeProvider",function(a){var b={name:"profile",url:"#/user/profile",templateUrl:"../app/User/Partials/profile.html",controller:"ProfileController",controllerAs:"profileCtrl",pageInfo:{icon:"user",title:"My profile"}},c={name:"user",url:"#/user",templateUrl:"../app/User/Partials/User/list.html",controller:"UserController",controllerAs:"userCtrl",resolve:{users:["UserService",function(a){return a.list()}]},pageInfo:{icon:"users",title:"Users"}},d={name:"user.create",url:"#/user/create",parent:c,templateUrl:"../app/User/Partials/User/edit.html",controller:"UserEditController",controllerAs:"userEditCtrl",resolve:{user:["UserService",function(a){return a["new"]()}]},pageInfo:{title:"Create"}},e={name:"user.edit",url:"#/user/edit",parent:c,templateUrl:"../app/User/Partials/User/edit.html",controller:"UserEditController",controllerAs:"userEditCtrl",resolve:{user:["$route","UserService",function(a,b){return b.get(a.current.params.userId)}]},pageInfo:{title:"Edit"}};a.when("/user/profile",b).when("/user",c).when("/user/create",d).when("/user/edit/:userId",e)}]),angular.module("UIModule",["UserModule","SearchModule"]),angular.module("UIModule").controller("SidebarController",[function(){this.toggle=!0,this.collapsed=!1,this.searchForm=!1,this.toggleSidebar=function(){this.collapsed=!this.collapsed}}]),angular.module("UIModule").directive("uiHeader",["HeaderService",function(a){return{restrict:"E",replace:!0,scope:{},templateUrl:"../app/UI/Partials/header.html",link:function(b){b.info=a.getInfo(),b.path=a.getPath(),b.buttons=a.getButtons(),b.buttonClick=function(a){a.action&&"function"==typeof a.action.func&&(a.action.params?a.action.func.apply(null,a.action.params):a.action.func())}}}}]),angular.module("UIModule").directive("uiMenu",["MenuService",function(a){return{restrict:"E",replace:!0,scope:{collapsed:"=?"},templateUrl:"../app/UI/Partials/menu.html",link:function(b){b.items=a.getItems(),b.toggleItemMenu=function(b,c){a.toggleItemMenu(c)&&b.preventDefault()}}}}]),angular.module("UIModule").directive("uiScrollbar",["$window","$timeout",function(a,b){var c={width:"auto",height:"auto",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"uiScrollRail",barClass:"uiScrollBar",wrapperClass:"uiScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"};return{restrict:"A",scope:{},link:function(d,e,f){function g(){if(B){var a=o.parent().parent().height();o.parent().css("height",a),o.css("height",a)}}function h(a){if(q){var a=a||window.event,b=0;a.wheelDelta&&(b=-a.wheelDelta/120),a.detail&&(b=a.detail/3);var c=a.target||a.srcTarget||a.srcElement;$(c).closest("."+p.wrapperClass).is(o.parent())&&i(b,!0),a.preventDefault&&!A&&a.preventDefault(),A||(a.returnValue=!1)}}function i(a,b,c){A=!1;var d=a,e=o.outerHeight()-E.outerHeight();if(b&&(d=parseInt(E.css("top"))+a*parseInt(p.wheelStep)/100*E.outerHeight(),d=Math.min(Math.max(d,0),e),d=a>0?Math.ceil(d):Math.floor(d),E.css({top:d+"px"})),w=parseInt(E.css("top"))/(o.outerHeight()-E.outerHeight()),d=w*(o[0].scrollHeight-o.outerHeight()),c){d=a;var f=d/o[0].scrollHeight*o.outerHeight();f=Math.min(Math.max(f,0),e),E.css({top:f+"px"})}o.scrollTop(d),o.trigger("slimscrolling",~~d),m(),n()}function j(){a.addEventListener?(e[0].addEventListener("DOMMouseScroll",h,!1),e[0].addEventListener("mousewheel",h,!1)):a.document.attachEvent("onmousewheel",h)}function k(){a.removeEventListener?(e[0].removeEventListener("DOMMouseScroll",h,!1),e[0].removeEventListener("mousewheel",h,!1)):a.document.removeEvent("onmousewheel",h)}function l(){v=Math.max(o.outerHeight()/o[0].scrollHeight*o.outerHeight(),z),E.css({height:v+"px"});var a=v==o.outerHeight()?"none":"block";E.css({display:a})}function m(){if(l(),b.cancel(t),w==~~w){if(A=p.allowPageScroll,x!=w){var a=0==~~w?"top":"bottom";o.trigger("slimscroll",a)}}else A=!1;return x=w,v>=o.outerHeight()?void(A=!0):(E.stop(!0,!0).fadeIn("fast"),void(p.railVisible&&D.stop(!0,!0).fadeIn("fast")))}function n(){p.alwaysVisible||(t=b(function(){p.disableFadeOut&&q||r||s||(E.fadeOut("slow"),D.fadeOut("slow"))},1e3))}var o=$(e),p=angular.extend({},c);"object"==typeof f.uiScrollbar&&(p=angular.extend(options,f.uiScrollbar));var q,r,s,t,u,v,w,x,y="<div></div>",z=30,A=!1,B=!1;"auto"==p.height&&(p.height=o.parent().height(),B=!0);var C=$(y).addClass(p.wrapperClass).css({position:"relative",overflow:"hidden",width:p.width,height:p.height});o.css({overflow:"hidden",width:p.width,height:p.height});var D=$(y).addClass(p.railClass).css({width:p.size,height:"100%",position:"absolute",top:0,display:p.alwaysVisible&&p.railVisible?"block":"none","border-radius":p.railBorderRadius,background:p.railColor,opacity:p.railOpacity,zIndex:90}),E=$(y).addClass(p.barClass).css({background:p.color,width:p.size,position:"absolute",top:0,opacity:p.opacity,display:p.alwaysVisible?"block":"none","border-radius":p.borderRadius,BorderRadius:p.borderRadius,MozBorderRadius:p.borderRadius,WebkitBorderRadius:p.borderRadius,zIndex:99}),F="right"==p.position?{right:p.distance}:{left:p.distance};D.css(F),E.css(F),o.wrap(C),o.parent().append(E),o.parent().append(D),p.railDraggable&&E.bind("mousedown",function(a){var b=$(document);s=!0;var c=parseFloat(E.css("top")),d=a.pageY;return b.bind("mousemove.slimscroll",function(a){var b=c+a.pageY-d;E.css("top",b),i(0,E.position().top,!1)}),b.bind("mouseup.slimscroll",function(){s=!1,n(),b.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(a){return a.stopPropagation(),a.preventDefault(),!1}),D.hover(function(){m()},function(){n()}),E.hover(function(){r=!0},function(){r=!1}),o.hover(function(){q=!0,m(),n()},function(){q=!1,n()}),o.bind("touchstart",function(a){a.originalEvent.touches.length&&(u=a.originalEvent.touches[0].pageY)}),o.bind("touchmove",function(a){if(A||a.originalEvent.preventDefault(),a.originalEvent.touches.length){var b=(u-a.originalEvent.touches[0].pageY)/p.touchScrollStep;i(b,!0),u=a.originalEvent.touches[0].pageY}}),l(),"bottom"===p.start?(E.css({top:o.outerHeight()-E.outerHeight()}),i(0,!0)):"top"!==p.start&&(i($(p.start).position().top,null,!0),p.alwaysVisible||E.hide()),j(),a.addEventListener("resize",g),d.$on("$destroy",function(){o.unwrap(),D.remove(),E.remove(),k(),a.removeEventListener("resize",g)})}}}]),angular.module("UIModule").directive("uiSidebar",[function(){return{restrict:"E",replace:!0,templateUrl:"../app/UI/Partials/sidebar.html",scope:{collapsed:"@collapsed",toggle:"@toggle"},controller:"SidebarController",controllerAs:"sidebar",bindToController:!0,link:function(a,b,c,d){"undefined"==typeof a.toggle&&(a.toggle=d.toggle),"undefined"==typeof a.collapsed&&(a.collapsed=d.collapsed),a.$watch("toggle",function(a){d.toggle=a}),a.$watch("collapsed",function(a){d.collapsed=a})}}}]),angular.module("UIModule").factory("AlertService",[function(){var a=[];return{add:function(){return a.push(),this},getNext:function(){}}}]),angular.module("UIModule").factory("HeaderService",["$window",function(a){var b="AIOMedia",c={icon:null,title:null},d=[],e=[],f=!0,g=null,h=null;return{getInfo:function(a){var b=null;return a?c[a]&&(b=c[a]):b=c,b},getPath:function(){return e},getButtons:function(){return d},addButton:function(a){var b={icon:a.icon?a.icon:null,iconOnly:a.iconOnly?a.iconOnly:!1,label:a.label?a.label:"",url:a.url?a.url:"",action:a.action?a.action:function(){}};a.action&&(b.action={func:a.action.func?a.action.func:function(){},params:a.action.params?a.action.params:[]}),d.push(b)},build:function(a,b){if(b){for(;e.length>0;)e.pop();for(;d.length>0;)d.pop();if(a.pageInfo||(a.pageInfo={}),c.icon=a.pageInfo.icon?a.pageInfo.icon:null,c.title=a.pageInfo.title?a.pageInfo.title:null,a.buttons)for(var g=0;g<a.buttons.length;g++)this.addButton(a.buttons[g]);b=!1}else"object"==typeof a.pageInfo&&(!c.icon&&a.pageInfo.icon&&(c.icon=a.pageInfo.icon),!c.title&&a.pageInfo.title&&(c.title=a.pageInfo.title)),a["abstract"]?a.pageInfo&&a.pageInfo.title&&(0!==e.length?e[e.length-1].title!==a.pageInfo.title&&(e[e.length-1].title=a.pageInfo.title+"-"+e[e.length-1].title):c.title!==a.pageInfo.title&&(c.title=a.pageInfo.title+" - "+c.title)):e.unshift({title:a.pageInfo.title,url:a.url});a.parent?this.build(a.parent,b):f&&e.unshift({title:"Home",url:"#/"})},getCurrent:function(){return g},setCurrent:function(d){return g=d,this.build(g,!0),a.document.title=c.title?c.title:b,this},getPrevious:function(){return h},setPrevious:function(a){return h=a,this}}}]),angular.module("UIModule").factory("MenuService",[function(){var a="square-o",b=null,c=[];return{getItems:function(){return c},browseItems:function(a,b){for(var c=null,d=0;d<a.length;d++){var e=a[d];if(c=b(e))break;if(e.children&&(c=this.browseItems(e.children,b)))break}return c},findItem:function(a){return this.browseItems(c,function(b){return b.id===a?b:null})},toggleItemMenu:function(a){var b=!1;return a.children.length>0&&(a.opened||this.closeItemMenus(),a.opened=!a.opened,b=!0),b},closeItemMenus:function(){for(var a=0;a<c.length;a++)c[a].opened&&(c[a].opened=!1);return this},addItem:function(a){return this.validateItem(a)?c.push(a):console.error("Menu : Try to add an invalid item to menu."),this},validateItem:function(b){var d=!0;if(b.id&&b.title)if(b.position||(b.position=c.length+100),b.icon||(b.icon=a),b.url||(b.url="#"),b.children)for(var e=0;e<b.children.length;e++)d=this.validateItem(b.children[e]);else b.children=[];else d=!1;return d},setActive:function(a){b&&this.setInactive(b),b=a;var c=this.findItem(b);return c&&(c.active=!0),this},setInactive:function(a){var b=this.findItem(a);return b&&(b.active=!1),this},checkRoute:function(a,b){var d=function(c){for(var e=!1,f=0;f<c.length;f++){if(0===c[f].children.length){var g=c[f].url.replace("#","");e=a.test(g)}else e=d(c[f].children);if(e){b&&this.setActive(c[f].id);break}}return!e&&b&&this.setActive(null),e}.bind(this);return a?d(c):(b&&this.setActive(null),!1)}}}]),angular.module("TaskModule",["ngRoute","ui.sortable"]).run(["MenuService",function(a){a.addItem({id:"task",position:5,icon:"tasks",title:"Tasks",url:"#/task"})}]),angular.module("TaskModule").controller("TaskController",["$modal","HeaderService","TaskService","tasks",function(a,b,c,d){this.tasks=d,this.editTask=null,this.editTaskIsNew=!1,this.sortableOptions={update:function(){console.log("coucou")},axis:"y",placeholder:"ui-sortable-placeholder"},this.toggleDownStatus=function(a){a.done=!a.done,c.save(a).then(function(){},function(){a.done=!a.done})},this.create=function(){console.log("create task"),this.editTaskIsNew||(this.editTask&&this.cancel(),this.editTask=c["new"](),this.editTaskIsNew=!0,this.tasks.unshift(this.editTask))},this.edit=function(a){console.log("edit task"),this.editTask&&this.cancel(),this.editTask=angular.extend({},a)},this["delete"]=function(a){console.log("delete task"),c["delete"](a).then(function(a){var b=this.tasks.indexOf(a);-1!==b&&this.tasks.splice(b,1)},function(){})},this.save=function(){console.log("save"),c.save(this.editTask).then(function(){this.editTask=null}.bind(this),function(){})},this.cancel=function(){if(console.log("cancel edit/create"),this.editTaskIsNew){var a=this.tasks.indexOf(this.editTask);-1!==a&&this.tasks.splice(a,1)}this.editTask=null,this.editTaskIsNew=!1},b.addButton({icon:"plus",iconOnly:!0,label:"Create Task",action:{func:function(){this.create()}.bind(this)}})}]),angular.module("TaskModule").controller("TaskEditController",["$location","TaskService","task",function(a,b,c){this.task=c,this.save=function(){b.save(this.task).then(function(){a.path("/task")},function(){})},this.cancel=function(){a.path("/task")}}]),angular.module("TaskModule").factory("TaskService",["$http","$q",function(a,b){return{"new":function(){return{_id:null,name:null,done:!1}},list:function(){var c=b.defer();return a.get("http://localhost:3000/task").success(function(a){c.resolve(a.data)}).error(function(a){c.reject(a)}),c.promise},get:function(c){var d=b.defer();return a.get("http://localhost:3000/task/"+c).success(function(a){d.resolve(a.data)}).error(function(a){d.reject(a)}),d.promise},save:function(c){var d=b.defer();if(c._id)var e=a.put("http://localhost:3000/task/"+c._id,c);else var e=a.post("http://localhost:3000/task/",c);return e.success(function(a){d.resolve(a.data)}).error(function(a){d.reject(a)}),d.promise}}}]),angular.module("TaskModule").config(["$routeProvider",function(a){var b={name:"task",url:"#/task",templateUrl:"../app/Task/Partials/list.html",controller:"TaskController",controllerAs:"taskCtrl",resolve:{tasks:["TaskService",function(a){return a.list()}]},pageInfo:{icon:"tasks",title:"My tasks"}};a.when("/task",b)}]),angular.module("DemoModule",["ngRoute","UIModule"]).run(["MenuService",function(a){a.addItem({id:"demo",icon:"laptop",title:"UI Demo",notification:{color:"green",value:"new"},children:[{id:"general",icon:"adjust",title:"General",url:"#/demo/ui/general"},{id:"buttons",icon:"hand-o-up",title:"Buttons",url:"#/demo/ui/buttons"},{id:"tables",icon:"table",title:"Tables",url:"#/demo/ui/tables"},{id:"forms",icon:"font",title:"Forms",url:"#/demo/ui/forms"},{id:"widgets",icon:"th",title:"Widgets",url:"#/demo/ui/widgets"},{id:"timeline",icon:"clock-o",title:"Timeline",url:"#/demo/ui/timeline"},{id:"404error",icon:"warning",title:"404 Error",url:"#/error/404"},{id:"500error",icon:"warning",title:"500 Error",url:"#/error/500"},{id:"blank",icon:"square-o",title:"Blank Page",url:"#/demo/blank"}]})}]),angular.module("DemoModule").config(["$routeProvider",function(a){var b={name:"demo","abstract":!0,pageInfo:{title:"Demo"}},c={name:"demo.widgets",url:"#/demo/ui/widgets",parent:b,templateUrl:"../app/Demo/Partials/widgets.html",pageInfo:{icon:"th",title:"Widgets",help:!0,config:!0}},d={name:"demo.ui","abstract":!0,parent:b,pageInfo:{icon:"laptop",title:"UI Elements"}},e={name:"demo.ui.general",url:"#/demo/ui/general",parent:d,templateUrl:"../app/Demo/Partials/general.html",pageInfo:{title:"General",help:!0,config:!0}},f={name:"demo.ui.buttons",url:"#/demo/ui/buttons",parent:d,templateUrl:"../app/Demo/Partials/buttons.html",pageInfo:{title:"Buttons",help:!0,config:!0}},g={name:"demo.ui.tables",url:"#/demo/ui/tables",parent:d,templateUrl:"../app/Demo/Partials/tables.html",pageInfo:{title:"Tables",help:!0,config:!0}},h={name:"demo.ui.forms",url:"#/demo/ui/forms",parent:d,templateUrl:"../app/Demo/Partials/forms.html",pageInfo:{title:"Forms",help:!0,config:!0}},i={name:"demo.ui.timeline",url:"#/demo/ui/timeline",parent:d,templateUrl:"../app/Demo/Partials/timeline.html",pageInfo:{title:"Timeline",help:!0,config:!0}},j={name:"demo.blank",url:"#/demo/blank",parent:b,templateUrl:"../app/Demo/Partials/blank.html",pageInfo:{icon:"folder",title:"Blank page"}};a.when("/demo/ui/widgets",c).when("/demo/ui/general",e).when("/demo/ui/buttons",f).when("/demo/ui/tables",g).when("/demo/ui/forms",h).when("/demo/ui/timeline",i).when("/demo/blank",j)}]),angular.module("App",["ngRoute","ui.bootstrap","UIModule","AdministrationModule","DashboardModule","TaskModule","DemoModule"]).config(["$httpProvider","$sceDelegateProvider",function(a){a.defaults.headers.common.Accept="application/json",a.defaults.headers.common["Content-Type"]="application/json"}]).run(["$rootScope","$location","HeaderService","MenuService","AuthenticationService",function(a,b,c,d,e){a.$on("$routeChangeStart",function(a,c){c.access&&c.access.requiredLogin&&!e.isLogged()&&b.path("/user/login")}),a.$on("$routeChangeSuccess",function(a,b,e){c.setPrevious(e),c.setCurrent(b),d.checkRoute(b.regexp,!0),d.closeItemMenus()}),a.$on("$routeChangeError",function(a,c,d,e){var f=e&&e.status&&e.status.code?e.status.code:500;switch(f){case 404:b.path("/error/404");break;case 500:default:b.path("/error/500")}})}]),angular.module("App").config(["$routeProvider",function(a){var b={redirectTo:"/home"},c={name:"error","abstract":!0,pageInfo:{icon:"warning",title:"Error"}},d={name:"error.404",parent:c,templateUrl:"../app/UI/Partials/error/404.html",pageInfo:{title:"404 Page not found"}},e={name:"error.500",parent:c,templateUrl:"../app/UI/Partials/error/500.html",pageInfo:{title:"500 Internal server error"}};a.when("/",b).when("/error/404",d).when("/error/500",e).otherwise({redirectTo:"/error/404"})}])}();